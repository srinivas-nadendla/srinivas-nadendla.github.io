(self.webpackChunksaWebComp=self.webpackChunksaWebComp||[]).push([[9849],{9849:function(t,e,o){"use strict";o.r(e),o.d(e,{calendarNs:function(){return n}});const n=function(){const t=o(7883),{htmlEncode:e,UUID:n,guidfromBase64:a}=o(1521),{dateUtils:r}=o(8900),s=(o(7233),o(5297),o(599),o(1802),o(2881).Z),{isClickInRect:i}=o(2494);!async function(){await o.e(2145).then(o.bind(o,2145))}(),s("PopupUtilsData",{}).currentZIndex=999999;const l=[{txt:e("Set filter"),icon:"filter",design:"Emphasized",action:"set"}],c=o(1921),d=o(6515),p=o(5719),u=(o(1070),o(9143)),h=t=>{const e=t.getAttribute("id"),o=t.getAttribute("data-json");let n,a;return o&&(a=JSON.parse(o),n=a.id),{id:n,idAttr:e,jsonData:a}},f={year:"numeric",month:"2-digit",day:"2-digit"};if(!customElements.get("sa-calendar-filter-tag")){function t(){return Reflect.construct(HTMLElement,[],this.constructor)}t.prototype=Object.create(HTMLElement.prototype),t.prototype.constructor=t,Object.setPrototypeOf(t,HTMLElement);const e=function(t,e){let o,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return o=t?"\n\t\t\t\t".concat(p,"\n\n\t\t\t\t").concat(n):n,o?["<style>",o,"</style>"].join(""):""},o=t=>{const e=[];if(t&&t.length){e.push("Selected Dates: ");for(const o of t){const t=new Date(o);e.length>1&&e.push(" - "),e.push(t.toLocaleDateString("default",f))}}else e.push("Select Filter Dates");return e},a=(t,e)=>{const n=[],a=o(e);if(e&&e.length)for(const t of e){const e=new Date(t);n.push(r.dateToCalendarString(e))}return{html:["<div>",'<div class="calendar-dialog-body">','<label class="calendar-dialog-currentfilterlbl">',a.join(""),"</label>",'<ui5-calendar selection-mode="Range" format-pattern="yyyy/MM/dd">',n.map((t=>["<ui5-date value='",t,"'>","</ui5-date>"].join(""))).join(""),"</ui5-calendar>","</div>",'<div class="calendar-dialog-footer">',l.map((t=>["<ui5-button data-action='",t.action,"' icon='",t.icon,"' design='",t.design,"'>",t.txt||"Ok","</ui5-button>"].join(""))).join(""),"</div></div>"]}};t.prototype.showAt=function(t){const e=this,o=document.createElement("ui5-popover");return o.placementType="Bottom",o.allowTargetOverlap=!0,o.appendChild(e),document.body.appendChild(o),o.showAt(t),o.addEventListener("before-close",e),e.parentPopup=o,o},t.prototype.connectedCallback=function(){const t=this,o=t.attachShadow({mode:"open"}),r=h(t),s=r.idAttr||n.uuid4();r.idAttr||t.setAttribute("data-id",r.id||s);const i=r.jsonData;if(i&&i.dates){t.filterDates=[];for(const e of i.dates)t.filterDates.push(e)}const l=e(!0,{}),{html:c}=a(r,t.filterDates);o.innerHTML=[l,c.join("")].join(""),o.children.length>1&&(o.children[1].addEventListener("click",t),o.addEventListener("selected-dates-change",t))},t.prototype.disconnectedCallback=function(){const t=this;t.shadowRoot&&t.shadowRoot.children.length>1&&(t.shadowRoot.children[1].removeEventListener("click",t),t.shadowRoot.removeEventListener("selected-dates-change",t))},t.prototype.handleEvent=function(t){const e=this;if("click"===t.type){const o=t.target.closest("ui5-button");if(o){const t=o.dataset,n=t&&t.action;if("set"===n||"clear"===n||"close"===n){let t;if(e.filterAction=n,"set"===n&&(t=e.filterDates,!t||2!==t.length))return;const o=e.parentPopup;o&&(o.isClosing=!0,o.close())}}}else if("before-close"===t.type){const t=e.filterAction||"cancel";let o;"set"===t&&(o=e.filterDates);const n=e.parentPopup;n&&n.removeEventListener("before-close",e),e.parentPopup=void 0;const a=new CustomEvent("calendar-filter-action",{detail:{dates:o,action:t},composed:!0,bubbles:!0,cancelable:!0});(n||e).dispatchEvent(a)}else if("selected-dates-change"===t.type){const n=t.detail.values;if(n&&n.length>1){e.filterDates=[];for(const t of n)e.filterDates.push(t);e.filterDates.sort(((t,e)=>new Date(t)-new Date(e)));const t=o(e.filterDates);e.shadowRoot.querySelector(".calendar-dialog-currentfilterlbl").innerHTML=t.join("")}}},customElements.define("sa-calendar-filter-tag",t)}if(!customElements.get("sa-calendar-dayview-tag")){function o(){return Reflect.construct(HTMLElement,[],this.constructor)}o.prototype=Object.create(HTMLElement.prototype),o.prototype.constructor=o,Object.setPrototypeOf(o,HTMLElement);const a=function(t,e){let o,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return o=t?"\n\t\t\t\t".concat(u,"\n\t\t\t\t").concat(c,"\n\t\t\t\t").concat(d,"\n\n\t\t\t\t:host {\n\t\t\t\t\t--calendardayviewdialog-height: ").concat(e.height,"px;\n\t\t\t\t\t--calendardayviewdialog-width: ").concat(e.width,"px;\n\t\t\t\t\t--calendardayviewdialog-hourswidth: ").concat(e.hoursWidth,"px;\n\t\t\t\t\t--calendardayviewdialog-eventswidth: ").concat(e.eventsWidth,"px;\n\t\t\t\t\t--shadow-strength: 75%;\n\t\t\t\t\t--shadow-color: 220 12% 6%;\n\n\t\t\t\t\t--sa-control-background: #333333;\n\t\t\t\t\t--sa-control-checked-background: #333333;\n\t\t\t\t\t--sa-control-color: #d1d1d1;\n\t\t\t\t\t--sa-control-checked-color: #333333;\n\t\t\t\t\t--sa-control-disabled: #959495;\n\n\t\t\t\t}\n\t\t\t\t").concat(n):n,o?["<style>",o,"</style>"].join(""):""};function s(t,e,o,n,a){const s=[],i={},l={};if(t){for(const t of e){const e=t.backgroundColor;l[t.id]=e}const c=new Date,d=r.getZeroDateTZ(c,n);let p=1440;r.getDayKey(d)===o&&(p=Math.max(c-d,0)/1e3);for(const e in t)if(0===e.indexOf("p_")&&(!a.length||a.includes(e))){let o;const n=t[e];if(n&&void 0!==n.tm?(i[e]=60*n.tm,o=n.it):o=n,o&&o.length)for(const t of o){const o=t[0];let n;n=t.length>1?t[1]:p;const a=[Math.floor(o/60),Math.floor(n/60),e];s.push(a)}}}const c=[];for(const t of s){const e=t[0],o=t[1],n=l[t[2]];c.push({start:e,end:o,color:n})}return{events:c,secondsByLocation:i}}const i=1440,l=8,p=(t,e,o)=>{const n=[],a=[],r=[];let s,c,d;for(let e=0;e<i;e++){const e=[];for(const o of t)e.push(0);n.push(e)}for(const[e,o]of t.entries()){var p,u;a.push(0),r.push(0);const t=Math.min(o.end,1440);let e=Math.max(o.start,0);t<=0||e>t||(s=Math.min(null!==(p=s)&&void 0!==p?p:23,Math.floor(e/60)),c=Math.max(null!==(u=c)&&void 0!==u?u:0,Math.floor(t/60)))}null==e?(s||c?(s||(s=0),c=c?Math.min(c+1,23):23,d=c-s+1,d<l&&(s=Math.max(s-Math.floor((l-d)/2),0),d=c-s+1,d<l&&(c=Math.min(c+(l-d),23),d=c-s+1))):(s=9,c=16,d=c-s+1),e=s,o=c):d=o-e+1;let h=0;return 0===e&&(h=6),{collisions:n,width:a,leftOffSet:r,startHour:e,endHour:o,totalHours:d,topOffset:h}},g=36,b=60,v=140,m=10,y=10,x=(t,e,o)=>{const n=[];let a=!0;for(let r=t;r<=e;r++)n.push('<div class="hour" data-hour="'),n.push(r),n.push('" style="height:'),24===r?(n.push(g-4),n.push("px;border:0;")):r===e?(n.push(g),n.push("px;border:0;")):(n.push(g),n.push("px;")),a&&(a=!1,o>0&&(n.push("margin-top:"),n.push(o),n.push("px;"))),n.push('"><span>'),0===r?n.push("12:00"):r>12?n.push(r-12,":00"):r>0&&n.push(r,":00"),n.push("</span>"),0===r?n.push("&nbsp; AM"):r>11?n.push("&nbsp; PM"):r>0&&n.push("&nbsp; AM"),n.push("</div>");return n.join("")},w=(t,e,o,n,a,r,s,i)=>{const l=a.start-e,c=a.end-e,d=a.color||"#4eb5ff",p=l/t*o+i,u=Math.max(1,(c-l)/t*o);let h=n/r,f=h*s+m;return(!f||f<m)&&(f=m),['<div class="event" style="--event-color:',d,";top:",p,"px;left:",f,"px;width:",h-m-y,"px;height:",u,'px;"></div>'].join("")},k=(o,n,a,s,i)=>{const{collisions:l,width:c,leftOffSet:d,startHour:p,endHour:u,totalHours:h,topOffset:g}=o,b=60*h,m=60*p,y=[];let k;for(const o of a){const a=o.backgroundColor||"white",s=t(a).lighten(20).toString(),i=o.id;let l=o.label;const c=n.secondsByLocation&&n.secondsByLocation[i];(c||0===c)&&(void 0===k&&(k=0),k+=c,l=[o.name,": ",r.getFormatedSecondsSpanString(c)].join(""),console.log(i+" labelTxt, old:"+o.label+" new:"+l)),y.push("<div class='item' style='--sa-control-checked-color:",s,";--sa-control-background:",a,"'><label class='sa-control'><input data-action='locfilter' data-id='",i,"' type='checkbox' />",e(l),"</label></div>")}let R=s.txt;void 0!==k&&(R=[new Date(s.dt).toLocaleDateString("default",f)," time: ",r.getFormatedSecondsSpanString(Math.min(k,86400))].join(""),console.log("headerTxt, old:"+s.txt+" new:"+R));const H=['<div class="dayviewcontainer">','<div class="legend rounded-scroll"><div class="header">',R,"</div>",y.join(""),"</div>",'<div class="hours">',x(p,u,g),'</div><div class="events">'];for(const[t,e]of n.events.entries()){const t=0;let o=1;o||(o=1),H.push(w(b,m,i,v,e,o,t,g))}return H.push("</div></div>"),{html:H}};o.prototype.connectedCallback=function(){const t=this,e=t.attachShadow({mode:"open"}),o=h(t),r=o.idAttr||n.uuid4();o.idAttr||t.setAttribute("data-id",o.id||r);const i=o.jsonData,l=i&&i.legends||[],c=i&&i.header,d=i&&i.intervalsByLocation;let u;u=d?s(d,l,i.dateKey,i.timezone,[]):{events:i&&i.events||[]};const f=p(u.events);t.startHour=f.startHour,t.endHour=f.endHour;const m=f.totalHours*g+f.topOffset,y=a(!0,{height:m,hoursWidth:b,eventsWidth:v,width:440}),{html:x}=k(f,u,l,c,m);e.innerHTML=[y,x.join("")].join(""),e.children.length>1&&e.children[1].addEventListener("click",t)},o.prototype.disconnectedCallback=function(){const t=this;t.shadowRoot&&t.shadowRoot.children.length>1&&t.shadowRoot.children[1].removeEventListener("click",t)},o.prototype.handleEvent=function(t){const e=this;if("click"===t.type){const o=t.target;if(o){const t=o.dataset;if("locfilter"===(t&&t.action)){const t=h(e).jsonData,o=t&&t.intervalsByLocation,n=e.shadowRoot.querySelectorAll(".legend :checked");if(o){const a=[];for(const t of n){const e=t.dataset&&t.dataset.id;a.push(e)}const r=s(o,t&&t.legends||[],t.dateKey,t.timezone,a),i=p(r.events,e.startHour,e.endHour),l=i.totalHours*g+i.topOffset,{collisions:c,width:d,leftOffSet:u,startHour:h,endHour:f,totalHours:b,topOffset:m}=i,y=60*b,x=60*h,k=e.shadowRoot.querySelector(".events"),R=[];for(const[t,e]of r.events.entries()){const t=0;let o=1;o||(o=1),R.push(w(y,x,l,v,e,o,t,m))}k.innerHTML=R.join("")}}}}},customElements.define("sa-calendar-dayview-tag",o)}return{popupUtil:{isClickInRect:i}}}()},4270:function(t,e,o){var n=o(7705)((function(t){return t[1]}));n.push([t.id,":host{--shadow-1:0 1px 2px -1px hsl(var(--shadow-color)/calc(var(--shadow-strength) + 9%))}:host{--event-color:#4eb5ff}.dayviewcontainer{display:grid;grid-auto-flow:column;grid-template-columns:1fr var(--calendardayviewdialog-hourswidth,62px) var(--calendardayviewdialog-eventswidth,200px);height:100%;width:var(--calendardayviewdialog-width,420px)}.dayviewcontainer,.legend{box-sizing:border-box;overflow-y:auto}.legend{color:#e5e5e5;height:var(--calendardayviewdialog-height,620px)}.legend>.header,.legend>.item{box-sizing:border-box;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;word-break:break-all}.legend>.header{border:solid #b9b2b2;border-width:0 0 1px;font-size:.84em;margin-bottom:4px;padding:2px 4px}.legend>.item{font-size:.74em;padding:2px 2px 2px 4px;position:relative}.hours{background-color:#444;color:#b9b2b2;font-size:.5em;height:var(--calendardayviewdialog-height,620px);overflow:hidden}.hour,.hours{box-sizing:border-box}.hour{align-items:baseline;border-bottom:1px solid #5e5e5e;display:flex;flex-direction:row;justify-content:flex-end;margin-left:6px;margin-right:6px;padding-top:4px}.hour>span{color:#e5e5e5;font-size:1.5em}.events{background-color:#444;height:var(--calendardayviewdialog-height,620px);position:relative}.event,.events{box-sizing:border-box;overflow:hidden}.event{background-color:#e3e3e3;border:solid var(--event-color);border-width:0 0 0 40px;box-shadow:var(--shadow-1);color:#e5e5e5;font-size:.7em;padding-left:6px;position:absolute}",""]),t.exports=n},894:function(t,e,o){var n=o(7705)((function(t){return t[1]}));n.push([t.id,":host{--sapFontFamily:Roboto-Regular,Roboto,Helvetica,sans-serif;--sapFontLightFamily:Roboto-Regular,Roboto,Helvetica,sans-serif;--sapFontBoldFamily:Roboto-Regular,Roboto,Helvetica,sans-serif;--sapFontBlackFamily:Roboto-Regular,Roboto,Helvetica,sans-serif;--sapFontHeaderFamily:Roboto-Regular,Roboto,Helvetica,sans-serif;--sapFontSize:0.82rem;--_ui5_calendar_height:20.4rem;--_ui5_day_picker_item_height:2.275rem;--_ui5_calendar_padding:3px;all:initial;box-sizing:border-box;font-family:Roboto-Regular,Roboto,Helvetica,sans-serif;padding-top:10px}.calendar-dialog-body{align-items:center;display:grid;justify-items:center}.calendar-dialog-currentfilterlbl,.calendar-dialog-rangelbl{color:#6a6d70;display:block;font-size:var(--sapFontSize);-webkit-user-select:none;-moz-user-select:none;user-select:none}.calendar-dialog-currentfilterlbl{font-weight:600}.calendar-dialog-rangecmb{display:block;width:80%}.calendar-dialog-footer{grid-gap:4px;align-items:center;display:grid;grid-auto-flow:column;grid-template-columns:repeat(auto-fit,minmax(100px,1fr));grid-template-rows:1fr;justify-items:center;margin:12px 0 8px;width:100%}.calendar-dialog-footer ui5-button{--sapButton_Hover_Background:var(--sa-secondarybtn-color,#097c24);--sapButton_Emphasized_Background:var(--sa-secondarybtn-color,#0a8727);--sapButton_Emphasized_BorderColor:var(--sa-secondarybtn-color,#0a8727);--sapButton_Emphasized_TextColor:#fff;--sapButton_Emphasized_Hover_Background:var(--sa-secondarybtn-color,#097c24);--sapButton_Emphasized_Hover_BorderColor:var(--sa-secondarybtn-color,#097c24);--sapButton_Emphasized_Hover_TextColor:#fff;width:130px}",""]),t.exports=n},7265:function(t,e,o){var n=o(7705)((function(t){return t[1]}));n.push([t.id,'.sa-control{box-sizing:border-box;display:grid;gap:.5em;grid-template-columns:1em auto}.sa-control input[type=checkbox]{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:var(--sa-control-background);border:.15em solid var(--sa-control-color);border-radius:.15em;box-sizing:border-box;color:var(--sa-control-color);display:grid;font:inherit;height:1.15em;margin:0;place-content:center;transform:translateY(-.075em);width:1.15em}.sa-control input[type=checkbox]:before{background-color:var(--sa-control-background);box-shadow:inset 1em 1em var(--sa-control-checked-color);-webkit-clip-path:polygon(14% 44%,0 65%,50% 100%,100% 16%,80% 0,43% 62%);clip-path:polygon(14% 44%,0 65%,50% 100%,100% 16%,80% 0,43% 62%);content:"";height:.65em;transform:scale(0);transform-origin:bottom left;transition:transform .12s ease-in-out;width:.65em}.sa-control input[type=checkbox]:checked{background-color:var(--sa-control-checked-background);border:.15em solid var(--sa-control-checked-color);box-shadow:0 0 1px 1px var(--sa-control-checked-color);color:var(--sa-control-checked-color)}.sa-control input[type=checkbox]:checked:before{transform:scale(1)}.sa-control input[type=checkbox]:disabled{--sa-control-color:var(--sa-control-disabled);color:var(--sa-control-disabled);cursor:not-allowed}',""]),t.exports=n},2326:function(t,e,o){var n=o(7705)((function(t){return t[1]}));n.push([t.id,"@font-face {\r\n\t/*font-family: Roboto-Regular, Roboto, Helvetica, sans-serif;\r\n\tfont-style: normal;\r\n\tfont-weight: 400;*/\r\n}\r\n:root{\r\n\t--sapFontFamily: Roboto-Regular, Roboto, Helvetica, sans-serif;\r\n\t--sapFontLightFamily: Roboto-Regular, Roboto, Helvetica, sans-serif;\r\n\t--sapFontBoldFamily: Roboto-Regular, Roboto, Helvetica, sans-serif;\r\n\t--sapFontBlackFamily: Roboto-Regular, Roboto, Helvetica, sans-serif;\r\n\t--sapFontHeaderFamily: Roboto-Regular, Roboto, Helvetica, sans-serif;\r\n}",""]),t.exports=n},1070:function(t,e,o){"use strict";o.r(e);var n=o(3379),a=o.n(n),r=o(2326),s=o.n(r);a()(s(),{attributes:{"data-ui5-font-face":""},insert:"head",singleton:!1}),e.default=s().locals||{}},9143:function(t,e,o){var n=o(4270);n&&n.__esModule&&(n=n.default),t.exports="string"==typeof n?n:n.toString()},5719:function(t,e,o){var n=o(894);n&&n.__esModule&&(n=n.default),t.exports="string"==typeof n?n:n.toString()},6515:function(t,e,o){var n=o(7265);n&&n.__esModule&&(n=n.default),t.exports="string"==typeof n?n:n.toString()}}]);